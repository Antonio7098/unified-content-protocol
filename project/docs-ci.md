# Documentation Build & Publishing

This project uses **MkDocs + Material** for the main docs site. Follow the steps below to preview locally and publish to GitHub Pages.

## 1. Install Dependencies

```bash
pip install mkdocs mkdocs-material
python -m pip install typedoc # optional helper via npm if you prefer
npm install --prefix packages/ucp-js typedoc --save-dev
pip install pdoc
```

## 2. Generate API References

Run these before `mkdocs build` so the HTML output is included:

```bash
# JavaScript reference
cd packages/ucp-js
npx typedoc src/index.ts --out ../../docs/reference/js --tsconfig tsconfig.json

# Python reference
cd ../ucp-python
python -m pip install .[dev]
pdoc src/ucp --output-directory ../../docs/reference/python
```

## 3. Preview Locally

From the repo root:

```bash
mkdocs serve
```

Open http://127.0.0.1:8000 to preview changes with live reload.

## 4. Publish to GitHub Pages

Add this GitHub Actions workflow (e.g., `.github/workflows/docs.yml`):

```yaml
name: docs

on:
  push:
    branches: [ main ]

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - uses: actions/setup-python@v5
        with:
          python-version: 3.12
      - run: pip install mkdocs mkdocs-material pdoc
      - working-directory: packages/ucp-js
        run: npm ci && npx typedoc src/index.ts --out ../../docs/reference/js --tsconfig tsconfig.json
      - working-directory: packages/ucp-python
        run: |
          python -m pip install .[dev]
          pdoc src/ucp --output-directory ../../docs/reference/python
      - run: mkdocs gh-deploy --force
```

This publishes the site to the `gh-pages` branch automatically.

## 5. Folder Layout

```
docs/
  index.md
  getting-started.md
  sdk/
    javascript.md
    python.md
  reference/
    js/ (generated by typedoc)
    python/ (generated by pdoc)
  examples.md
  releases.md
  docs-ci.md
```

Keep generated HTML out of version control by ignoring `docs/reference/js` and `docs/reference/python` if desired, or commit them after each release for offline viewing.
